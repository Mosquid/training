<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Gym Counters</title>
	<style>
		#app {
			width: 100%;
			max-width: 500px;
			margin: 0 auto;
		}
		.data-row {
			display: flex;
		}
		.data-cell {
			display: flex;
			flex: 1;
			width: 50px;
			height: 50px;
			border: 1px solid #eaeaea;
		}
		.data-cell.v {
			background-color: #ccff99;
		}
		button {
			width: 100%;
			box-sizing: border-box;
			font-weight: bold;
			text-transform: capitalize;
		}
	</style>
</head>
<body>
	<div id="app"></div>
	<script>
		const data = {
			pushups: {
				current: 0,
				max: 3,
			},
			pullups: {
				current: 0,
				max: 3,
			},
			squats: {
				current: 0,
				max: 3
			},
			calves: {
				current: 0,
				max: 3
			} 
		}

		function action(type) {
			if (!data.hasOwnProperty(type)) return

			data[type].current = Math.min(data[type].current+1, data[type].max)
			render()
		}

		function actionButton(type) {
			const el = document.createElement('button')
			el.textContent = type
			
			el.addEventListener('click', action.bind(el, type))

			return el
		}

		function dataRow(type) {
			const row = document.createElement('div')
			row.className = 'data-row'
			
			while (row.children.length < 4) {
				const cell = document.createElement('div')
				cell.className = 'data-cell'
				
				if (row.children.length && row.children.length <= data[type].current)
					cell.classList.add('v')
				
				row.appendChild(cell)
			}

			row.children[0].appendChild(actionButton(type))

			return row
		}

		function render() {
			const container = document.querySelector('#app')
			container.innerHTML = ''
			
			Object.keys(data).map(type => {
				const row = dataRow(type)
				container.appendChild(row)
			})
		}
		
		render()
	</script>
</body>
</html>